wp.customize.controlConstructor["vamtam-color-row"]=wp.customize.Control.extend({ready:function(){"use strict";var t=this,e=t.params.choices,a=Object.keys(e),n=this.params.value,o="vamtam_theme[accent-color]"==this.id,r=this.params.with_hc;function s(t,e,a){var n=t.container.find(".vamtam-color-row-index-"+a);n.wpColorPicker({change:function(){setTimeout(function(){o&&r?(e[a]=n.val(),t.setValue(e,!1),t.container.find(".vamtam-color-row-index-"+a).trigger("change"),t.renderWarning(t),t.params.value["auto-contrast"]&&a.match(/^\d$/)&&document.documentElement.style.setProperty(`--vamtam-accent-color-${a}-hc`,tinycolor.mostReadable(n.val(),["#fff","#000"]).toHexString())):(e[a]=n.val(),t.setValue(e,!1),t.container.find(".vamtam-color-row-index-"+a).trigger("change"))},100)},palettes:!1})}function i(){document.querySelector(t.selector).querySelectorAll(".vamtam-color-row-container .vamtam-color-row-single-color-wrapper:nth-child(4)").forEach(function(t){t.classList.contains("vamtam-disable-color-picker")||t.classList.add("vamtam-disable-color-picker")});for(let t=1;t<=8;t++)document.documentElement.style.setProperty(`--vamtam-accent-color-${t}-hc`,tinycolor.mostReadable(n[t],["#fff","#000"]).toHexString())}function c(e,a,n){n.checked?(a["auto-contrast"]=!0,i()):(a["auto-contrast"]=!1,document.querySelector(t.selector).querySelectorAll(".vamtam-color-row-container .vamtam-color-row-single-color-wrapper:nth-child(4)").forEach(function(t){t.classList.contains("vamtam-disable-color-picker")&&t.classList.remove("vamtam-disable-color-picker")})),t.setValue(a,!1),t.renderWarning(t)}o&&r&&(this.renderWarning(t),t.container.find(".automatic-contrast-colors").trigger("change"),void 0!==n["auto-contrast"]&&n["auto-contrast"]&&i()),this.settingField=this.container.find("[data-customize-setting-link]").first();for(var l=0;l<Object.keys(e).length;l++)if("auto-contrast"==a[l]){const t=this.id+"-auto-contrast",e=document.getElementById(t);e.addEventListener("change",t=>c(0,n,e))}else s(this,n,a[l])},setValue:function(t,e){"use strict";var a={};_.each(t,function(t,e){a[e]=t}),this.setting.set(a),e&&this.settingField.trigger("change")},renderWarning:function(t){let e=t.params.value,a=t.getWarnings(e);t.colorWarningIconManager(t,a),t.registerTooltipEventListener(t)},registerTooltipEventListener:function(t){t.clearTooltipEventListener(t);let e=document.getElementsByClassName("dashicons-warning");for(let a=0;a<e.length;a++){let n=e[a];n.addEventListener("mouseover",t.ttTurnOn.bind(t),!1),n.addEventListener("mouseout",t.ttTurnOff,!1)}},clearTooltipEventListener:function(t){for(let e=1;e<=8;e++){let a=document.getElementById("color-row-warning-"+e);a.removeEventListener("mouseover",t.ttTurnOn.bind(t),!1),a.removeEventListener("mouseout",t.ttTurnOff,!1)}},ttTurnOn:function(t){const e=document.getElementById("vamtam-warning-tooltip");e&&e.parentNode.removeChild(e);const a=this.params.value["auto-contrast"]?vamtamColorRowObj.tooltip_msg_auto:vamtamColorRowObj.tooltip_msg,n=document.createElement("div");n.id="vamtam-warning-tooltip";const o=`<div class="desc">\n\t\t\t\t\t\t\t\t\t\t<p>${a}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="info">\n\t\t\t\t\t\t\t\t\t\t<div class="level"> <span class="red">A</span>AA</div>\n\t\t\t\t\t\t\t\t\t\t<div class="read-more"><a target="_blank" href="https://www.w3.org/WAI/WCAG21/quickref/?versions=2.0#distinguishable">Read more</a></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<i></i>`;n.innerHTML=o,t.target.closest(".vamtam-color-row-container").appendChild(n)},ttTurnOff:t=>{let e=t.target.closest(".vamtam-color-row-container");setTimeout(function(){let t=document.getElementById("vamtam-warning-tooltip");t&&e.contains(t)&&e.removeChild(t)},1e3)},getWarnings:function(t){let e={level:"AAA",size:"small"},a={level:"AA",size:"small"},n=[],o=[];for(let r=1;r<=8;r++){let s=t[r],i=t[r+"-hc"];t["auto-contrast"]&&(i=tinycolor.mostReadable(s,["#fff","#000"]).toHexString()),tinycolor.isReadable(s,i,a)?tinycolor.isReadable(s,i,e)||n.push(r):o.push(r)}return{aaa:n,aa:o}},colorWarningIconManager:function(t,e){t.clearIcons(t),e.aaa&&e.aaa.length&&t.addIcons(e.aaa,"aaa"),e.aa&&e.aa.length&&t.addIcons(e.aa,"aa")},addIcons:function(t,e){let a="contrast-warning-"+e;if(t||0!==t.length)for(let e=0;e<t.length;e++){let n="color-row-warning-"+t[e],o=document.getElementById(n);o.classList.contains("dashicons-yes-alt")&&o.classList.remove("dashicons-yes-alt"),o.classList.add("dashicons-warning"),o.classList.add(a)}},clearIcons:function(t){let e=document.getElementById(t.container[0].id).querySelectorAll(".vamtam-color-row-container .color-row-warning .dashicons");for(let t=0;t<e.length;t++)e[t].classList.contains("dashicons-warning")&&e[t].classList.remove("dashicons-warning"),e[t].classList.contains("contrast-warning-aaa")&&e[t].classList.remove("contrast-warning-aaa"),e[t].classList.contains("contrast-warning-aa")&&e[t].classList.remove("contrast-warning-aa"),e[t].classList.contains("dashicons-yes-alt")||e[t].classList.add("dashicons-yes-alt")}});