!function(t,e){"use strict";wp.customize.controlConstructor["vamtam-typography"]=wp.customize.Control.extend({ready:function(){var e,n=this,a=n.selector+" .font-family select",o=n.selector+" .font-weight select",i={};_.each(n.params.default,function(t,e){!1!==t&&(i[e]=t,n.params.value[e]!==n.setting._value[e]&&n.params.value.hasOwnProperty(e)&&(n.setting._value[e]=n.params.value[e]),void 0!==n.setting._value[e]&&(i[e]=n.setting._value[e]))}),_.each(n.setting._value,function(t,e){void 0!==i[e]&&void 0!==i[e]||(i[e]=t)});var s=function(e,n){var a=t(o),i=n||a.val();let s;a.empty();for(let n in VAMTAM_ALL_FONTS){const o=VAMTAM_ALL_FONTS[n];if(s=o,e===o.family){for(let e of o.weights){if(!(isNaN(e)&&"bold"!==e&&"normal"!==e)){var l=t("<option>");l.text(e),a.append(l)}}break}}s&&(s.weights.indexOf(i)>-1?a.val(i):a.val(s.weights.indexOf("normal")>-1?"normal":s.weights[0]))};t(a).val(n.setting._value["font-family"]);var l=function(e){return t("<span style=\"font-family:'"+e.text+"';\">"+e.text+"</span>")};t(a).vamtamSelect2({dropdownParent:t(n.selector+" .font-family"),templateResult:l,templateSelection:l}),VAMTAM_CUSTOMIZER.controls.addSelectiveFontLoadingToSelect2(this,t(a)),s(i["font-family"],i["font-weight"]),this.container.on("change",".font-family select",function(){var e=t(this).val();e&&(i["font-family"]=e,n.saveValue(i),s(e,null),t(this).css("font-family",i["font-family"]))}),VAMTAM_CUSTOMIZER.controls.addSelectsChangeHandlers(this,i),VAMTAM_CUSTOMIZER.controls.addInputsChangeHandlers(this,i),VAMTAM_CUSTOMIZER.controls.addUnitHandlers(this,i),VAMTAM_CUSTOMIZER.controls.addRespBtnHandlers(this,i),(e=this.container.find(".vamtam-color-picker")).wpColorPicker({change:function(){setTimeout(function(){i.color=e.val(),n.saveValue(i)},100)}}),VAMTAM_CUSTOMIZER.controls.updateDummyProp(i),n.saveValue(i),setTimeout(()=>{wp.customize.state("saved").set(!0)},1)},saveValue:function(t){var e={};_.each(t,function(t,n){e[n]=t}),this.setting.set(e)}}),t(document).on("ready",function(){wp.customize.previewedDevice.bind(function(e){t(".resp-btns [data-device="+("mobile"===e?"phone":e)+"]").each(function(e,n){t(n).click()})})})}(jQuery);